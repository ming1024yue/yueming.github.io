<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="img-src 'self' data: https: http:;">
    <title>Research Detail</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="translations.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .research-detail {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: transparent;
            color: var(--secondary-text);
            text-decoration: none;
            margin-bottom: 3rem;
            font-weight: 400;
            padding: 0.5rem 0;
            border-bottom: 1px solid transparent;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.85rem;
        }

        .back-link:hover {
            color: var(--text-color);
            border-bottom-color: var(--text-color);
            text-decoration: none;
        }

        .research-header {
            text-align: center;
            margin-bottom: 4rem;
            padding: 4rem 2rem;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 8px;
            overflow: hidden;
        }

        .research-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: 1;
        }

        .research-header > * {
            position: relative;
            z-index: 2;
        }

        .research-header.has-image {
            color: white;
        }

        .research-header.has-image .research-author,
        .research-header.has-image .research-date {
            color: rgba(255, 255, 255, 0.8);
        }

        .research-header.has-image h1 {
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Default header without image */
        .research-header:not(.has-image) {
            background: var(--hover-bg);
            padding: 2rem 0;
        }

        .research-header:not(.has-image)::before {
            display: none;
        }

        /* Dark theme adjustments */
        [data-theme="dark"] .research-header:not(.has-image) {
            background: rgba(255, 255, 255, 0.05);
        }

        [data-theme="dark"] .research-image {
            border-color: rgba(255, 255, 255, 0.1);
        }

        .research-header h1 {
            font-size: 2.5rem;
            font-weight: 200;
            margin-bottom: 1.5rem;
            color: var(--text-color);
            line-height: 1.2;
            letter-spacing: 0.5px;
        }

        .research-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .research-author {
            color: var(--secondary-text);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .research-author::before {
            content: '\f007';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.7rem;
        }



        .research-date {
            color: var(--secondary-text);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .research-date::before {
            content: '\f073';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.7rem;
        }

        .research-content {
            line-height: 1.8;
            color: var(--text-color);
            background: var(--thought-bg);
            padding: 2rem 0;
        }

        .research-content h1 {
            font-size: 2rem;
            font-weight: 300;
            margin: 2.5rem 0 1.5rem;
            color: var(--text-color);
            position: relative;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .research-content h2 {
            font-size: 1.6rem;
            font-weight: 400;
            margin: 2rem 0 1rem;
            color: var(--text-color);
        }

        .research-content h3 {
            font-size: 1.3rem;
            font-weight: 500;
            margin: 1.5rem 0 1rem;
            color: var(--text-color);
        }

        .research-content h4 {
            font-size: 1.1rem;
            font-weight: 500;
            margin: 1.2rem 0 0.8rem;
            color: var(--text-color);
        }

        .research-content p {
            margin: 1.2rem 0;
            text-align: justify;
        }

        .research-content ul, 
        .research-content ol {
            margin: 1.2rem 0;
            padding-left: 2rem;
        }

        .research-content li {
            margin: 0.6rem 0;
        }

        .research-content blockquote {
            border-left: 2px solid var(--text-color);
            margin: 2rem 0;
            padding: 1rem 1.5rem;
            background: var(--hover-bg);
            color: var(--secondary-text);
            font-style: italic;
        }

        .research-content code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 2px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            border: 1px solid var(--border-color);
        }

        .research-content pre {
            background: var(--code-bg);
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
        }

        .research-content img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 2.5rem auto;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transition: transform 0.3s ease;
            cursor: zoom-in;
        }

        .research-content img:hover {
            transform: scale(1.02);
        }

        /* Image zoom modal styles */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .image-modal.active {
            display: flex;
        }

        .image-modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .image-modal-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 8px;
            animation: zoomIn 0.3s ease;
        }

        .image-modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
            z-index: 2001;
        }

        .image-modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .image-modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 15px 20px;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s ease;
            z-index: 2001;
        }

        .image-modal-nav:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .image-modal-prev {
            left: 20px;
        }

        .image-modal-next {
            right: 20px;
        }

        .image-modal-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 2001;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .research-content strong {
            color: var(--text-color);
            font-weight: 600;
        }

        .research-content em {
            color: var(--secondary-text);
        }

        /* Table styles */
        .research-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
        }

        .research-content th,
        .research-content td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .research-content th {
            background: var(--hover-bg);
            color: var(--text-color);
            font-weight: 500;
        }

        .research-content tr:hover {
            background: var(--hover-bg);
        }

        /* Progress indicator */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background: var(--text-color);
            z-index: 1000;
            transition: width 0.3s ease;
        }

        /* Interactive section styles */
        .interactive-section {
            margin: 3rem 0;
            padding: 2rem 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }

        .interactive-title {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--text-color);
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .interactive-title::before {
            content: '';
            display: block;
            width: 40px;
            height: 2px;
            background: var(--text-color);
            margin: 0 auto 1rem;
        }

        .interactive-container {
            display: flex;
            gap: 3rem;
            align-items: flex-start;
            margin-bottom: 3rem;
        }

        .robot-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            position: relative;
        }

        .robot-svg {
            width: 350px;
            height: 500px;
            margin-bottom: 1rem;
        }

        .robot-svg:hover {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
        }

        .robot-part {
            cursor: pointer;
            transition: all 0.3s ease;
            stroke-width: 2;
            stroke: var(--text-color);
        }

        .robot-part:hover {
            fill-opacity: 0.7;
            stroke-width: 3;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .robot-part.active {
            fill-opacity: 0.8;
            stroke-width: 3;
            filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3));
        }

        [data-theme="dark"] .robot-part {
            stroke: #ccc;
        }

        .info-panel {
            flex: 1;
            background: var(--hover-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            min-height: 400px;
            overflow-y: auto;
            max-height: 600px;
        }

        .info-panel::-webkit-scrollbar {
            width: 6px;
        }

        .info-panel::-webkit-scrollbar-track {
            background: var(--bg-color);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .info-panel::-webkit-scrollbar-thumb:hover {
            background: var(--text-color);
        }

        .info-panel h3 {
            margin-top: 0;
            color: var(--text-color);
            border-bottom: 2px solid var(--text-color);
            padding-bottom: 10px;
        }

        .company-list {
            margin-top: 20px;
        }

        .company-category {
            margin-bottom: 25px;
        }

        .company-category h4 {
            color: var(--text-color);
            margin-bottom: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .company-item {
            background: var(--bg-color);
            border-left: 3px solid var(--text-color);
            border-radius: 0 4px 4px 0;
            padding: 12px 15px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .company-item:hover {
            border-left-color: var(--text-color);
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transform: translateX(4px);
        }

        .company-name {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 4px;
        }

        .company-desc {
            font-size: 0.85em;
            color: var(--secondary-text);
            line-height: 1.4;
        }

        .default-info {
            color: var(--text-color);
            font-size: 1rem;
        }

        .default-info h3 {
            margin-top: 0;
            color: var(--text-color);
            border-bottom: 2px solid var(--text-color);
            padding-bottom: 10px;
        }

        .default-info p {
            line-height: 1.6;
            color: var(--secondary-text);
            margin: 1rem 0;
        }

        .legend {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--hover-bg);
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .legend h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: var(--text-color);
            font-size: 1rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.85rem;
            color: var(--secondary-text);
        }

        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 3px;
            margin-right: 12px;
            border: 1px solid var(--text-color);
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .research-header {
                padding: 3rem 1rem;
                margin-bottom: 2rem;
            }

            .research-header h1 {
                font-size: 2rem;
            }
            
            .research-meta {
                gap: 1rem;
                flex-direction: column;
                align-items: center;
            }

            .research-author {
                font-size: 0.8rem;
            }
            
            .research-detail {
                padding: 1rem;
            }

            .research-content {
                padding: 2rem 1.5rem;
            }

            .research-content h1 {
                font-size: 1.8rem;
            }

            .research-content h2 {
                font-size: 1.5rem;
            }

            .back-link {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }

            .interactive-section {
                margin: 2rem 0;
                padding: 1.5rem 0;
            }

            .interactive-title {
                font-size: 1.2rem;
                margin-bottom: 1.5rem;
            }

            .interactive-container {
                flex-direction: column;
                gap: 2rem;
            }

            .robot-container {
                flex: 1;
                width: 100%;
            }

            .robot-svg {
                width: 280px;
                height: 380px;
            }

            .info-panel {
                min-height: 300px;
                padding: 1.5rem;
            }

            .legend {
                margin-top: 1.5rem;
                padding: 1rem;
            }

            .legend-item {
                font-size: 0.8rem;
                margin-bottom: 8px;
            }

            .legend-color {
                width: 14px;
                height: 14px;
                margin-right: 8px;
            }
        }


    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button onclick="setLanguage('zh')" id="lang-zh">ä¸­æ–‡</button>
        <button onclick="setLanguage('en')" id="lang-en">English</button>
    </div>

    <div class="top-links">
        <div class="menu-group">
            <a href="index.html">å…³äºæˆ‘</a>
            <a href="thoughts.html">æƒ³æ³•</a>
            <a href="books.html">é˜…è¯»</a>
            <a href="research.html">ç ”ç©¶</a>
            <a href="products.html">æˆ‘çš„äº§å“</a>
        </div>
    </div>

    <!-- Reading progress bar -->
    <div class="reading-progress" id="reading-progress"></div>

    <main>
        <div class="research-detail"></div>
            <a href="research.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                <span>è¿”å›ç ”ç©¶åˆ—è¡¨</span>
            </a>
            
            <div class="research-header">
                <h1 id="research-title">ç ”ç©¶æ ‡é¢˜</h1>
                <div class="research-meta">
                    <div class="research-author" id="research-author">å²³é“­</div>
                    <div class="research-date">
                        <span id="research-date">2025-01-01</span>
                    </div>
                </div>
            </div>
            
            <!-- Interactive Section for Humanoid Research -->
            <div class="interactive-section" id="interactive-section" style="display: none;">
                <h2 class="interactive-title">äº§ä¸šé“¾äº¤äº’å¼åˆ†æ - ç‚¹å‡»æœºå™¨äººéƒ¨ä½æ¢ç´¢</h2>
                <div class="interactive-container">
                    <div class="robot-container">
                        <svg class="robot-svg" viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
                            <!-- å¤´éƒ¨ (å¤§è„‘ç³»ç»Ÿ) -->
                            <circle cx="200" cy="80" r="50" fill="#e8f4f8" class="robot-part" data-part="brain" />
                            <circle cx="185" cy="70" r="5" fill="#333" />
                            <circle cx="215" cy="70" r="5" fill="#333" />
                            <path d="M 180 90 Q 200 100 220 90" stroke="#333" stroke-width="2" fill="none" />
                            
                            <!-- é¢ˆéƒ¨ -->
                            <rect x="190" y="130" width="20" height="30" fill="#f0f0f0" stroke="#333" stroke-width="2" />
                            
                            <!-- èº¯å¹² -->
                            <rect x="150" y="160" width="100" height="120" rx="10" fill="#f5f5f5" stroke="#333" stroke-width="2" />
                            
                            <!-- èƒ¸éƒ¨ä¼ æ„Ÿå™¨åŒºåŸŸ (è§†è§‰ç³»ç»Ÿ) -->
                            <rect x="170" y="180" width="60" height="40" rx="5" fill="#f0f8e8" class="robot-part" data-part="vision" stroke="#333" stroke-width="2" />
                            <circle cx="185" cy="200" r="8" fill="#333" />
                            <circle cx="215" cy="200" r="8" fill="#333" />
                            
                            <!-- è…¹éƒ¨ (åŠ¨åŠ›ç³»ç»Ÿ/ç”µæ± ) -->
                            <rect x="170" y="230" width="60" height="30" rx="5" fill="#fff8e8" class="robot-part" data-part="power" stroke="#333" stroke-width="2" />
                            
                            <!-- å·¦è‡‚ -->
                            <rect x="100" y="170" width="50" height="20" rx="10" fill="#f8f0f8" class="robot-part" data-part="actuator" stroke="#333" stroke-width="2" />
                            <rect x="80" y="190" width="20" height="60" rx="10" fill="#f8f0f8" class="robot-part" data-part="actuator" stroke="#333" stroke-width="2" />
                            <circle cx="90" cy="260" r="15" fill="#f8f0f8" class="robot-part" data-part="sensor" stroke="#333" stroke-width="2" />
                            
                            <!-- å³è‡‚ -->
                            <rect x="250" y="170" width="50" height="20" rx="10" fill="#f8f0f8" class="robot-part" data-part="actuator" stroke="#333" stroke-width="2" />
                            <rect x="300" y="190" width="20" height="60" rx="10" fill="#f8f0f8" class="robot-part" data-part="actuator" stroke="#333" stroke-width="2" />
                            <circle cx="310" cy="260" r="15" fill="#f8f0f8" class="robot-part" data-part="sensor" stroke="#333" stroke-width="2" />
                            
                            <!-- è…°éƒ¨ (æ§åˆ¶ç³»ç»Ÿ) -->
                            <rect x="160" y="280" width="80" height="30" rx="5" fill="#f8f8e8" class="robot-part" data-part="control" stroke="#333" stroke-width="2" />
                            
                            <!-- å·¦è…¿ -->
                            <rect x="160" y="310" width="25" height="80" rx="5" fill="#e8f8f0" class="robot-part" data-part="structure" stroke="#333" stroke-width="2" />
                            <rect x="160" y="390" width="25" height="60" rx="5" fill="#e8f8f0" class="robot-part" data-part="structure" stroke="#333" stroke-width="2" />
                            <ellipse cx="172" cy="470" rx="20" ry="10" fill="#e8f8f0" class="robot-part" data-part="structure" stroke="#333" stroke-width="2" />
                            
                            <!-- å³è…¿ -->
                            <rect x="215" y="310" width="25" height="80" rx="5" fill="#e8f8f0" class="robot-part" data-part="structure" stroke="#333" stroke-width="2" />
                            <rect x="215" y="390" width="25" height="60" rx="5" fill="#e8f8f0" class="robot-part" data-part="structure" stroke="#333" stroke-width="2" />
                            <ellipse cx="227" cy="470" rx="20" ry="10" fill="#e8f8f0" class="robot-part" data-part="structure" stroke="#333" stroke-width="2" />
                            
                            <!-- é€šä¿¡å¤©çº¿ -->
                            <line x1="200" y1="30" x2="200" y2="10" stroke="#333" stroke-width="3" class="robot-part" data-part="communication" />
                            <circle cx="200" cy="10" r="5" fill="#f0e8f8" class="robot-part" data-part="communication" stroke="#333" stroke-width="2" />
                        </svg>

                        <div class="legend">
                            <h4>éƒ¨ä»¶è¯´æ˜</h4>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #e8f4f8;"></div>
                                <span>å¤§è„‘ç³»ç»Ÿ - AIèŠ¯ç‰‡ä¸ç®—æ³•</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #f0f8e8;"></div>
                                <span>è§†è§‰ç³»ç»Ÿ - ä¼ æ„Ÿå™¨ä¸å›¾åƒå¤„ç†</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #fff8e8;"></div>
                                <span>åŠ¨åŠ›ç³»ç»Ÿ - ç”µæ± ä¸ç”µæºç®¡ç†</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #f8f0f8;"></div>
                                <span>é©±åŠ¨ç³»ç»Ÿ - ç”µæœºä¸å‡é€Ÿå™¨</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #f8f8e8;"></div>
                                <span>æ§åˆ¶ç³»ç»Ÿ - è¿åŠ¨è§„åˆ’ä¸åè°ƒ</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #e8f8f0;"></div>
                                <span>ç»“æ„ç³»ç»Ÿ - æœºæ¢°æœ¬ä½“ä¸ææ–™</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #f0e8f8;"></div>
                                <span>é€šä¿¡ç³»ç»Ÿ - è¿æ¥ä¸äº¤äº’</span>
                            </div>
                        </div>
                    </div>

                    <div class="info-panel">
                        <div id="default-info" class="default-info">
                            <h3>ä¸­å›½äººå½¢æœºå™¨äººäº§ä¸šé“¾</h3>
                            <p>äººå½¢æœºå™¨äººä¹Ÿè¢«ç§°ä¸ºå…·èº«æ™ºèƒ½ï¼ˆhumanoid intelligence)ï¼Œä»£è¡¨äº†äººå·¥æ™ºèƒ½ã€æœºæ¢°å·¥ç¨‹ã€ææ–™ç§‘å­¦ç­‰å¤šä¸ªé¢†åŸŸçš„æŠ€æœ¯èåˆã€‚æ˜¯AIçš„ç‰©ç†å»¶ä¼¸ã€‚</p>
                            <p>æœ¬ç ”ç©¶ä»¥äººå½¢æœºå™¨äººçš„æ ¸å¿ƒæ„é€ ä¸ºæ¡†æ¶ï¼Œæ·±å…¥åˆ†æä¸­å›½åœ¨å„ä¸ªå…³é”®ç»„ä»¶é¢†åŸŸçš„äº§ä¸šå¸ƒå±€ã€æŠ€æœ¯æ°´å¹³å’Œä¾›åº”é“¾ç°çŠ¶ã€‚</p>
                            <p style="margin-top: 2rem; color: var(--secondary-text); font-size: 0.9rem;"><strong>ğŸ’¡ æç¤ºï¼š</strong>ç‚¹å‡»å·¦ä¾§æœºå™¨äººçš„ä¸åŒéƒ¨ä½ï¼ŒæŸ¥çœ‹ç›¸å…³äº§ä¸šé“¾å…¬å¸ä¿¡æ¯</p>
                        </div>
                        <div id="part-info" style="display: none;">
                            <h3 id="part-title"></h3>
                            <div id="part-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="research-content" id="research-content">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 å²³é“­. All rights reserved.</p>
    </footer>

    <!-- Image zoom modal -->
    <div class="image-modal" id="imageModal">
        <div class="image-modal-content">
            <button class="image-modal-close" id="closeModal">&times;</button>
            <button class="image-modal-nav image-modal-prev" id="prevImage" style="display: none;">&#10094;</button>
            <img class="image-modal-img" id="modalImage" src="" alt="">
            <button class="image-modal-nav image-modal-next" id="nextImage" style="display: none;">&#10095;</button>
            <div class="image-modal-counter" id="imageCounter" style="display: none;"></div>
        </div>
    </div>

    <script>
        // Global interactive data for humanoid research
        const partData = {
            brain: {
                title: "å¤§è„‘ç³»ç»Ÿ - AIèŠ¯ç‰‡ä¸ç®—æ³•",
                categories: [
                    {
                        name: "èŠ¯ç‰‡è®¾è®¡",
                        companies: [
                            { name: "åä¸ºæµ·æ€", desc: "æ˜‡è…¾ç³»åˆ—AIèŠ¯ç‰‡ï¼Œåœ¨ç«¯ä¾§æ¨ç†æ–¹é¢æœ‰è¾ƒå¼ºå®åŠ›" },
                            { name: "å¯’æ­¦çºª", desc: "ä¸“æ³¨AIèŠ¯ç‰‡è®¾è®¡ï¼ŒMLUç³»åˆ—äº§å“é€‚ç”¨äºæœºå™¨äººåº”ç”¨" },
                            { name: "åœ°å¹³çº¿", desc: "å¾ç¨‹ç³»åˆ—èŠ¯ç‰‡ï¼Œåœ¨è¾¹ç¼˜AIè®¡ç®—é¢†åŸŸé¢†å…ˆ" },
                            { name: "é»‘èŠéº»æ™ºèƒ½", desc: "åå±±ç³»åˆ—èŠ¯ç‰‡ï¼Œä¸“æ³¨è‡ªåŠ¨é©¾é©¶å’Œæœºå™¨äººè§†è§‰" }
                        ]
                    },
                    {
                        name: "ç®—æ³•ä¸è½¯ä»¶",
                        companies: [
                            { name: "å•†æ±¤ç§‘æŠ€", desc: "è®¡ç®—æœºè§†è§‰ç®—æ³•ï¼Œäººä½“å§¿æ€è¯†åˆ«" },
                            { name: "æ—·è§†ç§‘æŠ€", desc: "Face++å¹³å°ï¼Œäººè„¸è¯†åˆ«å’Œè¡Œä¸ºåˆ†æ" },
                            { name: "ç™¾åº¦", desc: "é£æ¡¨æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ŒApolloè‡ªåŠ¨é©¾é©¶æŠ€æœ¯" },
                            { name: "è…¾è®¯", desc: "è…¾è®¯AI Labï¼Œå¼ºåŒ–å­¦ä¹ å’Œæœºå™¨äººæ§åˆ¶ç®—æ³•" }
                        ]
                    }
                ]
            },
            vision: {
                title: "è§†è§‰ç³»ç»Ÿ - ä¼ æ„Ÿå™¨ä¸å›¾åƒå¤„ç†",
                categories: [
                    {
                        name: "æ‘„åƒå¤´æ¨¡ç»„",
                        companies: [
                            { name: "èˆœå®‡å…‰å­¦", desc: "å…¨çƒé¢†å…ˆçš„å…‰å­¦å™¨ä»¶åˆ¶é€ å•†" },
                            { name: "æ¬§è²å…‰", desc: "æ‘„åƒå¤´æ¨¡ç»„å’Œå…‰å­¦å™¨ä»¶" },
                            { name: "ä¸˜é’›ç§‘æŠ€", desc: "æ‘„åƒå¤´æ¨¡ç»„åˆ¶é€ " },
                            { name: "éŸ¦å°”è‚¡ä»½", desc: "å›¾åƒä¼ æ„Ÿå™¨èŠ¯ç‰‡è®¾è®¡" }
                        ]
                    },
                    {
                        name: "æ¿€å…‰é›·è¾¾",
                        companies: [
                            { name: "é€Ÿè…¾èšåˆ›", desc: "å›ºæ€æ¿€å…‰é›·è¾¾æŠ€æœ¯é¢†å…ˆ" },
                            { name: "ç¦¾èµ›ç§‘æŠ€", desc: "æœºæ¢°å¼å’Œæ··åˆå›ºæ€æ¿€å…‰é›·è¾¾" },
                            { name: "åä¸º", desc: "96çº¿è½¦è§„çº§æ¿€å…‰é›·è¾¾" },
                            { name: "å¤§ç–†", desc: "Livoxç³»åˆ—æ¿€å…‰é›·è¾¾" }
                        ]
                    },
                    {
                        name: "æ·±åº¦æ‘„åƒå¤´",
                        companies: [
                            { name: "å¥¥æ¯”ä¸­å…‰", desc: "3Dè§†è§‰æ„ŸçŸ¥æŠ€æœ¯" },
                            { name: "æµ·åº·å¨è§†", desc: "å·¥ä¸šç›¸æœºå’Œè§†è§‰ç³»ç»Ÿ" },
                            { name: "å¤§åè‚¡ä»½", desc: "è§†é¢‘ç›‘æ§å’Œæœºå™¨è§†è§‰" }
                        ]
                    }
                ]
            },
            power: {
                title: "åŠ¨åŠ›ç³»ç»Ÿ - ç”µæ± ä¸ç”µæºç®¡ç†",
                categories: [
                    {
                        name: "ç”µæ± åˆ¶é€ ",
                        companies: [
                            { name: "å®å¾·æ—¶ä»£", desc: "å…¨çƒæœ€å¤§çš„åŠ¨åŠ›ç”µæ± åˆ¶é€ å•†" },
                            { name: "æ¯”äºšè¿ª", desc: "ç£·é…¸é“é”‚ç”µæ± æŠ€æœ¯é¢†å…ˆ" },
                            { name: "å›½è½©é«˜ç§‘", desc: "ä¸“æ³¨åŠ¨åŠ›ç”µæ± å’Œå‚¨èƒ½ç”µæ± " },
                            { name: "äº¿çº¬é”‚èƒ½", desc: "æ¶ˆè´¹ç”µæ± å’ŒåŠ¨åŠ›ç”µæ± " }
                        ]
                    },
                    {
                        name: "ç”µæºç®¡ç†",
                        companies: [
                            { name: "åœ£é‚¦è‚¡ä»½", desc: "æ¨¡æ‹ŸèŠ¯ç‰‡å’Œç”µæºç®¡ç†IC" },
                            { name: "éŸ¦å°”è‚¡ä»½", desc: "ç”µæºç®¡ç†å’Œä¿¡å·é“¾èŠ¯ç‰‡" },
                            { name: "è‰¾ä¸ºç”µå­", desc: "éŸ³é¢‘å’Œç”µæºç®¡ç†èŠ¯ç‰‡" },
                            { name: "èŠ¯æœ‹å¾®", desc: "ç”µæºç®¡ç†èŠ¯ç‰‡è®¾è®¡" }
                        ]
                    }
                ]
            },
            actuator: {
                title: "é©±åŠ¨ç³»ç»Ÿ - ç”µæœºä¸å‡é€Ÿå™¨",
                categories: [
                    {
                        name: "ä¼ºæœç”µæœº",
                        companies: [
                            { name: "æ±‡å·æŠ€æœ¯", desc: "å·¥ä¸šè‡ªåŠ¨åŒ–å’Œä¼ºæœç³»ç»Ÿ" },
                            { name: "åŸƒæ–¯é¡¿", desc: "æœºå™¨äººç”¨ä¼ºæœç”µæœº" },
                            { name: "è‹±å¨è…¾", desc: "å˜é¢‘å™¨å’Œä¼ºæœé©±åŠ¨å™¨" },
                            { name: "å°è¾¾", desc: "ä¼ºæœç”µæœºå’Œé©±åŠ¨å™¨" }
                        ]
                    },
                    {
                        name: "å‡é€Ÿå™¨",
                        companies: [
                            { name: "ç»¿çš„è°æ³¢", desc: "è°æ³¢å‡é€Ÿå™¨é¢†åŸŸé¢†å…ˆ" },
                            { name: "ä¸­å¤§åŠ›å¾·", desc: "ç²¾å¯†å‡é€Ÿå™¨åˆ¶é€ " },
                            { name: "åŒç¯ä¼ åŠ¨", desc: "é½¿è½®ä¼ åŠ¨è®¾å¤‡" },
                            { name: "ç§¦å·æœºåºŠ", desc: "ç²¾å¯†å‡é€Ÿå™¨å’ŒæœºåºŠ" }
                        ]
                    }
                ]
            },
            sensor: {
                title: "æ„ŸçŸ¥ç³»ç»Ÿ - å¤šå…ƒä¼ æ„Ÿå™¨èåˆ",
                categories: [
                    {
                        name: "IMUä¼ æ„Ÿå™¨",
                        companies: [
                            { name: "åä¸ºæµ·æ€", desc: "é«˜ç²¾åº¦IMUèŠ¯ç‰‡" },
                            { name: "æ•èŠ¯è‚¡ä»½", desc: "MEMSä¼ æ„Ÿå™¨è®¾è®¡åˆ¶é€ " },
                            { name: "æ­Œå°”è‚¡ä»½", desc: "MEMSéº¦å…‹é£å’Œä¼ æ„Ÿå™¨" },
                            { name: "ç‘å£°ç§‘æŠ€", desc: "å£°å­¦å’Œä¼ æ„Ÿå™¨è§£å†³æ–¹æ¡ˆ" }
                        ]
                    },
                    {
                        name: "åŠ›è§‰ä¼ æ„Ÿå™¨",
                        companies: [
                            { name: "æŸ¯åŠ›ä¼ æ„Ÿ", desc: "ç§°é‡å’ŒåŠ›å­¦ä¼ æ„Ÿå™¨" },
                            { name: "ä¸­èˆªç”µæµ‹", desc: "åº”å˜å¼ä¼ æ„Ÿå™¨" },
                            { name: "åå·¥ç§‘æŠ€", desc: "æ¿€å…‰å’Œä¼ æ„Ÿå™¨æŠ€æœ¯" }
                        ]
                    }
                ]
            },
            structure: {
                title: "ç»“æ„ç³»ç»Ÿ - æœºæ¢°æœ¬ä½“ä¸ææ–™",
                categories: [
                    {
                        name: "ææ–™ä¾›åº”",
                        companies: [
                            { name: "ä¸­å¤ç¥é¹°", desc: "ç¢³çº¤ç»´ææ–™" },
                            { name: "å…‰å¨å¤æ", desc: "ç¢³çº¤ç»´åŠå¤åˆææ–™" },
                            { name: "ä¸­å›½é“ä¸š", desc: "é«˜å¼ºåº¦é“åˆé‡‘" },
                            { name: "ä¸‡ååŒ–å­¦", desc: "é«˜æ€§èƒ½èšæ°¨é…¯ææ–™" }
                        ]
                    },
                    {
                        name: "ç²¾å¯†åŠ å·¥",
                        companies: [
                            { name: "åä¸­æ•°æ§", desc: "æ•°æ§æœºåºŠå’ŒåŠ å·¥ä¸­å¿ƒ" },
                            { name: "æ²ˆé˜³æœºåºŠ", desc: "ç²¾å¯†æœºåºŠåˆ¶é€ " },
                            { name: "å…ˆä¸´ä¸‰ç»´", desc: "3Dæ‰“å°è®¾å¤‡å’ŒæœåŠ¡" },
                            { name: "é“‚åŠ›ç‰¹", desc: "é‡‘å±3Dæ‰“å°æŠ€æœ¯" }
                        ]
                    }
                ]
            },
            communication: {
                title: "é€šä¿¡ç³»ç»Ÿ - è¿æ¥ä¸äº¤äº’",
                categories: [
                    {
                        name: "é€šä¿¡èŠ¯ç‰‡",
                        companies: [
                            { name: "åä¸ºæµ·æ€", desc: "5GåŸºå¸¦å’ŒWiFièŠ¯ç‰‡" },
                            { name: "ç´«å…‰å±•é”", desc: "ç§»åŠ¨é€šä¿¡èŠ¯ç‰‡" },
                            { name: "è”å‘ç§‘", desc: "WiFiå’Œè“ç‰™èŠ¯ç‰‡" },
                            { name: "ç‘æ˜±åŠå¯¼ä½“", desc: "ç½‘ç»œé€šä¿¡èŠ¯ç‰‡" }
                        ]
                    },
                    {
                        name: "è¯­éŸ³äº¤äº’",
                        companies: [
                            { name: "ç§‘å¤§è®¯é£", desc: "è¯­éŸ³è¯†åˆ«å’ŒåˆæˆæŠ€æœ¯" },
                            { name: "æ€å¿…é©°", desc: "å¯¹è¯å¼äººå·¥æ™ºèƒ½" },
                            { name: "äº‘çŸ¥å£°", desc: "ç‰©è”ç½‘AIèŠ¯ç‰‡å’Œç®—æ³•" },
                            { name: "å‡ºé—¨é—®é—®", desc: "è¯­éŸ³äº¤äº’å’Œå¯¹è¯AI" }
                        ]
                    }
                ]
            },
            control: {
                title: "æ§åˆ¶ç³»ç»Ÿ - è¿åŠ¨è§„åˆ’ä¸åè°ƒ",
                categories: [
                    {
                        name: "æ“ä½œç³»ç»Ÿ",
                        companies: [
                            { name: "åä¸º", desc: "é¸¿è’™OSï¼Œé€‚ç”¨äºç‰©è”ç½‘è®¾å¤‡" },
                            { name: "é˜¿é‡Œå·´å·´", desc: "AliOS Thingsï¼Œç‰©è”ç½‘æ“ä½œç³»ç»Ÿ" },
                            { name: "è…¾è®¯", desc: "TencentOS tinyï¼Œç‰©è”ç½‘ç»ˆç«¯æ“ä½œç³»ç»Ÿ" },
                            { name: "RT-Thread", desc: "å¼€æºå®æ—¶æ“ä½œç³»ç»Ÿ" }
                        ]
                    },
                    {
                        name: "æ§åˆ¶ç®—æ³•",
                        companies: [
                            { name: "å¤§ç–†", desc: "é£è¡Œæ§åˆ¶å’Œç¨³å®šç®—æ³•" },
                            { name: "ä¼˜å¿…é€‰", desc: "äººå½¢æœºå™¨äººæ§åˆ¶ç³»ç»Ÿ" },
                            { name: "é’¢é“ä¾ ç§‘æŠ€", desc: "å¤–éª¨éª¼æ§åˆ¶ç®—æ³•" },
                            { name: "å‚…åˆ©å¶æ™ºèƒ½", desc: "åº·å¤æœºå™¨äººæ§åˆ¶ç³»ç»Ÿ" }
                        ]
                    }
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', async () => {
            // Set initial theme
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Update language switcher active state
            const currentLang = getCurrentLanguage();
            const zhBtn = document.getElementById('lang-zh');
            const enBtn = document.getElementById('lang-en');
            if (zhBtn && enBtn) {
                zhBtn.classList.toggle('active', currentLang === 'zh');
                enBtn.classList.toggle('active', currentLang === 'en');
            }

            // Get research ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const researchId = urlParams.get('id');

            // Research data (same as in research.html)
            const researchData = {
                'humanoid_research': {
                    title: 'ä¸­å›½äººå½¢æœºå™¨äººäº§ä¸šé“¾ç ”ç©¶',
                    titleEn: 'China Humanoid Robot Industry Chain Research',
                    author: 'å²³é“­',
                    authorEn: 'Yue Ming',
                    date: '2025-12-15',
                    image: 'images/research/humanoid.jpg',
                    file: 'research/humanoid_research.md'
                }
            };

            if (researchId && researchData[researchId]) {
                const research = researchData[researchId];
                
                // Update page content
                function updateContent() {
                    const currentLang = getCurrentLanguage();
                    const title = currentLang === 'zh' ? research.title : research.titleEn;
                    const author = currentLang === 'zh' ? research.author : research.authorEn;
                    
                    document.getElementById('research-title').textContent = title;
                    document.getElementById('research-author').textContent = author;
                    document.getElementById('research-date').textContent = research.date;
                    document.title = title;
                    
                    // Set background image if available
                    const headerElement = document.querySelector('.research-header');
                    if (research.image) {
                        // Test if image loads successfully
                        const img = new Image();
                        img.onload = function() {
                            headerElement.style.backgroundImage = `url(${research.image})`;
                            headerElement.classList.add('has-image');
                        };
                        img.onerror = function() {
                            // Image failed to load, use default styling
                            headerElement.classList.remove('has-image');
                        };
                        img.src = research.image;
                    }
                    
                    // Update back link text
                    const backLinkSpan = document.querySelector('.back-link span');
                    if (backLinkSpan) {
                        backLinkSpan.textContent = currentLang === 'zh' ? 'è¿”å›ç ”ç©¶åˆ—è¡¨' : 'Back to Research';
                    }
                }

                // Reading progress indicator
                function updateReadingProgress() {
                    const content = document.getElementById('research-content');
                    const progressBar = document.getElementById('reading-progress');
                    
                    if (content && progressBar) {
                        const contentTop = content.offsetTop;
                        const contentHeight = content.offsetHeight;
                        const windowHeight = window.innerHeight;
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        
                        const progress = Math.min(100, Math.max(0, 
                            ((scrollTop - contentTop + windowHeight) / contentHeight) * 100
                        ));
                        
                        progressBar.style.width = progress + '%';
                    }
                }

                // Add scroll listener for reading progress
                window.addEventListener('scroll', updateReadingProgress);
                window.addEventListener('resize', updateReadingProgress);
                
                updateContent();
                
                // Load markdown content
                try {
                    const response = await fetch(research.file);
                    if (response.ok) {
                        const markdown = await response.text();
                        const html = marked.parse(markdown);
                        document.getElementById('research-content').innerHTML = html;
                        
                        // Show interactive section for humanoid research
                        if (researchId === 'humanoid_research') {
                            document.getElementById('interactive-section').style.display = 'block';
                            initializeInteractive();
                        }
                    } else {
                        // Fallback content if file doesn't exist
                        const currentLang = getCurrentLanguage();
                        const fallbackContent = currentLang === 'zh' 
                            ? '<p>ç ”ç©¶å†…å®¹æ­£åœ¨æ•´ç†ä¸­ï¼Œæ•¬è¯·æœŸå¾…...</p>'
                            : '<p>Research content is being organized, please stay tuned...</p>';
                        document.getElementById('research-content').innerHTML = fallbackContent;
                    }
                } catch (error) {
                    console.error('Error loading research content:', error);
                    const currentLang = getCurrentLanguage();
                    const errorContent = currentLang === 'zh' 
                        ? '<p>åŠ è½½ç ”ç©¶å†…å®¹æ—¶å‡ºé”™ï¼Œè¯·ç¨åå†è¯•ã€‚</p>'
                        : '<p>Error loading research content, please try again later.</p>';
                    document.getElementById('research-content').innerHTML = errorContent;
                }
                
                // Update content when language changes
                const originalSetLanguage = window.setLanguage;
                window.setLanguage = function(lang) {
                    originalSetLanguage(lang);
                    updateContent();
                };
                
            } else {
                // Research not found
                const currentLang = getCurrentLanguage();
                const notFoundContent = currentLang === 'zh' 
                    ? '<h1>ç ”ç©¶æœªæ‰¾åˆ°</h1><p>æŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„ç ”ç©¶å†…å®¹ä¸å­˜åœ¨ã€‚</p>'
                    : '<h1>Research Not Found</h1><p>Sorry, the research content you are looking for does not exist.</p>';
                document.querySelector('.research-detail').innerHTML = notFoundContent;
            }

            // Update page content based on current language
            updatePageContent();
        });

        // Interactive functionality for humanoid research
        function initializeInteractive() {
            const robotParts = document.querySelectorAll('.robot-part');
            const infoPanelDiv = document.getElementById('part-info');
            
            // Add click event listeners to robot parts
            robotParts.forEach(part => {
                part.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const partType = this.getAttribute('data-part');
                    showPartInfo(partType);
                    
                    // Remove active state from other parts
                    robotParts.forEach(p => p.classList.remove('active'));
                    // Add active state to current part
                    this.classList.add('active');
                });

                // Add hover effect
                part.addEventListener('mouseenter', function() {
                    if (!this.classList.contains('active')) {
                        this.style.opacity = '0.8';
                    }
                });

                part.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.opacity = '1';
                    }
                });
            });

            // Reset display when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.robot-part') && !e.target.closest('.info-panel')) {
                    resetDisplay();
                }
            });

            // Prevent reset when clicking inside info panel
            if (infoPanelDiv) {
                infoPanelDiv.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        }

        function showPartInfo(partType) {
            const data = partData[partType];
            if (!data) return;

            const defaultInfo = document.getElementById('default-info');
            const partInfo = document.getElementById('part-info');
            
            // Fade out default info
            if (defaultInfo) {
                defaultInfo.style.opacity = '0';
                defaultInfo.style.transition = 'opacity 0.2s ease';
                setTimeout(() => {
                    defaultInfo.style.display = 'none';
                    defaultInfo.style.opacity = '1';
                }, 200);
            }

            // Fade in part info
            if (partInfo) {
                partInfo.style.display = 'block';
                partInfo.style.opacity = '0';
                partInfo.style.transition = 'opacity 0.2s ease';
                setTimeout(() => {
                    partInfo.style.opacity = '1';
                }, 10);
            }
            
            document.getElementById('part-title').textContent = data.title;
            
            let content = '';
            data.categories.forEach(category => {
                content += `
                    <div class="company-category">
                        <h4>${category.name}</h4>
                        ${category.companies.map(company => `
                            <div class="company-item">
                                <div class="company-name">${company.name}</div>
                                <div class="company-desc">${company.desc}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            });
            
            document.getElementById('part-content').innerHTML = content;
        }

        function resetDisplay() {
            const defaultInfo = document.getElementById('default-info');
            const partInfo = document.getElementById('part-info');
            
            // Fade out part info
            if (partInfo) {
                partInfo.style.opacity = '0';
                partInfo.style.transition = 'opacity 0.2s ease';
                setTimeout(() => {
                    partInfo.style.display = 'none';
                    partInfo.style.opacity = '1';
                }, 200);
            }

            // Fade in default info
            if (defaultInfo) {
                defaultInfo.style.display = 'block';
                defaultInfo.style.opacity = '0';
                defaultInfo.style.transition = 'opacity 0.2s ease';
                setTimeout(() => {
                    defaultInfo.style.opacity = '1';
                }, 10);
            }

            document.querySelectorAll('.robot-part').forEach(p => p.classList.remove('active'));
        }

        // Image zoom functionality
        let currentImageIndex = 0;
        let allImages = [];

        function initializeImageZoom() {
            const contentImages = document.querySelectorAll('.research-content img');
            allImages = Array.from(contentImages);
            
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const closeBtn = document.getElementById('closeModal');
            const prevBtn = document.getElementById('prevImage');
            const nextBtn = document.getElementById('nextImage');
            const counter = document.getElementById('imageCounter');

            // Add click event to all images
            allImages.forEach((img, index) => {
                img.addEventListener('click', function(e) {
                    e.stopPropagation();
                    currentImageIndex = index;
                    openImageModal(img.src);
                });
            });

            // Close modal
            closeBtn.addEventListener('click', closeImageModal);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeImageModal();
                }
            });

            // Navigation
            prevBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                currentImageIndex = (currentImageIndex - 1 + allImages.length) % allImages.length;
                openImageModal(allImages[currentImageIndex].src);
            });

            nextBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                currentImageIndex = (currentImageIndex + 1) % allImages.length;
                openImageModal(allImages[currentImageIndex].src);
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!modal.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeImageModal();
                } else if (e.key === 'ArrowLeft') {
                    currentImageIndex = (currentImageIndex - 1 + allImages.length) % allImages.length;
                    openImageModal(allImages[currentImageIndex].src);
                } else if (e.key === 'ArrowRight') {
                    currentImageIndex = (currentImageIndex + 1) % allImages.length;
                    openImageModal(allImages[currentImageIndex].src);
                }
            });

            function openImageModal(src) {
                modal.classList.add('active');
                modalImage.src = src;
                
                // Show/hide navigation buttons
                if (allImages.length > 1) {
                    prevBtn.style.display = 'block';
                    nextBtn.style.display = 'block';
                    counter.style.display = 'block';
                    counter.textContent = `${currentImageIndex + 1} / ${allImages.length}`;
                } else {
                    prevBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                    counter.style.display = 'none';
                }
                
                document.body.style.overflow = 'hidden';
            }

            function closeImageModal() {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Initialize image zoom after content is loaded
        const originalInitializeInteractive = initializeInteractive;
        window.addEventListener('load', function() {
            setTimeout(initializeImageZoom, 100);
        });
    </script>
</body>
</html>